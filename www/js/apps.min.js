function initOrder(){Vue.component("app-order",{props:{Index:Number},data(){return{}},mounted(){}})}function initBenefits(){Vue.component("app-benefits",{data(){return{Slides:BENEFITS_DATA,Selected:0,options:{direction:"horizontal",slideActiveClass:"active",touchReleaseOnEdges:!0,speed:1200,lazy:{loadPrevNext:!0},watchSlidesProgress:!0,on:{progress:function(){var t=this;for(let e=0;e<t.slides.length;e++){var o=t.slides[e].progress*(.7*t.width);t.slides[e].querySelector(".img").style.transform="translate3d("+o+"px, 0, 0)"}},touchStart:function(){for(let e=0;e<this.slides.length;e++)this.slides[e].style.transition=""},setTransition:function(t,o){t=this;for(let e=0;e<t.slides.length;e++)t.slides[e].style.transition=o+"ms",t.slides[e].querySelector(".img").style.transition=o+"ms"}}}}},computed:{slider(){return this.$refs.slider}},watch:{Selected(){this.$refs.slider.swiper.slideTo(this.Selected)}},mounted(){const t=this;t.$refs.slider.swiper.on("slideChange",function(){var e=this.realIndex;t.Selected=e})}})}function initPoints(){Vue.component("app-points",{data(){return{Slides:POINTS_DATA,isStart:!0,Selected:0,options:{loop:!0,slideActiveClass:"active",autoHeight:!0,lazy:{loadPrevNext:!0},direction:"horizontal",speed:600},optionsPager:{direction:"vertical",speed:600,slideActiveClass:"active"}}},computed:{Pager(){return this.$refs.pager},Slider(){return this.$refs.slider}},mounted(){const t=this;t.Selected=1,t.Slider.swiper.on("slideChange",function(){var e=this.realIndex;t.Pager.swiper.slideTo(e)})}})}function initGallery(){Vue.component("app-gallery",{props:{isPhone:Boolean},data(){return{Slides:GALLERY_DATA,Direction:"start",options:{autoHeight:!0,direction:"horizontal",lazy:{loadPrevNext:!0},navigation:{nextEl:".gallery-next",prevEl:".gallery-prev",disabledClass:"disabled"},breakpointsInverse:!0,breakpoints:{0:{speed:600},768:{speed:1200}}}}},mounted(){const e=this;e.initFancy(),e.Slider.swiper.on("slideNextTransitionStart",function(){e.Direction=this.realIndex+1==e.Slides.length?"end":"next"}).on("slidePrevTransitionStart",function(){e.Direction=0==this.realIndex?"start":"prev"}).on("reachBeginning",function(){e.Direction="start"}).on("reachEnd",function(){e.Direction="end"})},computed:{Slider(){return this.$refs.slider}},methods:{initFancy(){const o=this;$(o.$refs.fancy).fancybox({hash:!1,protect:!0,transitionEffect:"slide",transitionDuration:800,animationDuration:800,clickSlide:!1,buttons:["close"],beforeShow:function(e,t){o.Slider&&o.Slider.swiper.slideTo(e.currIndex)}})}}})}function initFlats(){Vue.component("app-flats",{data(){return{isLoaded:!1,ItemsAll:[],Items:[],Rooms:[],Types:[],Levels:[],Areas:[],Flats:[],Flat:{},Blocks:[],url:URLS.flats,SelectedRooms:null,SelectedType:null,SelectedLevel:0,SelectedArea:null,SelectedView:"default",SelectedFlat:!1,ImageLoaded:!1}},created(){const t=this;fetch(t.url).then(e=>e.json()).then(e=>{t.ItemsAll=e,t.init()})},methods:{init(){let t=[],o=[],s=[];this.ItemsAll.forEach(function(e){1==e.status&&(s.push(e),e.type?o.push(e.type):t.push(e.rooms))}),o=sort(o=unique(o),"asc"),t=sort(t=unique(t),"asc"),this.isLoaded=!0,this.Items=s,this.Rooms=t,this.Types=o,this.SelectRooms(t[0])},SelectTypes(e){this.Select("type",e)},SelectRooms(e){this.Select("rooms",e)},Select(t,o){this.SelectedRooms="rooms"==t?o:null,this.SelectedType="type"==t?o:null;let s=[];this.Items.forEach(function(e){("type"==t&&e.type==o||"rooms"==t&&e.rooms==o)&&s.push(e.level)}),s=sort(s=unique(s),"asc");var e=this.SelectedFlat?this.SelectedFlat.level:s[0];this.Levels=s,this.SelectedView="default",this.SelectLevel(e)},SelectLevel(t){this.SelectedLevel=t;let o=this.SelectedRooms,s=this.SelectedType,i=[];this.Items.forEach(function(e){(s&&e.type==s&&e.level==t||o&&e.rooms==o&&e.level==t)&&i.push(e.area)}),i=sort(i=unique(i),"asc");var e=this.SelectedFlat?this.SelectedFlat.area:0<=i.indexOf(this.Flat.area)?this.Flat.area:i[0];this.Areas=i,this.SelectedFlat=!1,this.SelectArea(e)},SelectArea(t){this.SelectedArea=t;let o=this.SelectedRooms,s=this.SelectedType,i=this.SelectedLevel,n=[],r=[];this.Items.forEach(function(e){(o&&e.rooms==o&&e.level==i&&e.area==t||s&&e.type==s&&e.level==i&&e.area==t)&&(n.push(e.block),r.push(e))}),n=sort(n=unique(n),"asc"),this.Blocks=n,this.Flats=r,this.Flat=r[0],this.loadImage(),this.initFancy()},initFancy(){$(this.$refs.fancy).fancybox({hash:!1,protect:!0,animationDuration:400,clickSlide:!1,buttons:["close"],beforeShow:function(){document.body.classList.add("flats--photo")},afterClose:function(){document.body.classList.remove("flats--photo")}})},loadImage(){const e=this;let t=new Image;t.src=e.Flat.img,e.ImageLoaded=!1,t.onload=function(){e.ImageLoaded=!0,t=null}},checkStatus:function(t,o){var e="",s=this.ItemsAll.filter(function(e){return e.block==o&&e.area==t&&1==e.status})[0];return s&&(e="available"),s&&1==s.status||(e="disabled"),e=s&&this.Flat&&s.area==this.Flat.area?"selected":e},selectFlat(t,o){var e=this.Items.find(function(e){return e.area==t&&e.block==o});this.SelectedFlat=e,this.Select(e.type?"type":"rooms",e.type||e.rooms)}}})}function initTerms(){Vue.component("app-terms",{data(){return{Items:TERMS_DATA}}})}function initDropTerms(){Vue.component("app-drop-terms",{props:{Terms:Object}})}function initStatus(){Vue.component("app-status",{data(){return{Slides:STATUS_DATA,options:{direction:"horizontal",slideActiveClass:"active",slideToClickedSlide:!0,speed:600,lazy:{loadPrevNext:!0,loadPrevNextAmount:3},slidesPerView:"auto",spaceBetween:56}}}})}function initModalStatus(){Vue.component("app-modal-status",{props:{Selected:Object,isShowed:Boolean},data(){return{isLoaded:!1,options:{direction:"horizontal",speed:600,lazy:{loadPrevNext:!0},navigation:{nextEl:".modal-status-next",prevEl:".modal-status-prev",disabledClass:"disabled"}},optionsPager:{direction:"vertical",speed:600,slideActiveClass:"active"}}},watch:{Selected(){const e=this;setTimeout(function(){e.initPager()},100)}},created(){this.isLoaded=!0},computed:{Amount(){if(this.Selected.photos)return this.Selected.photos.length}},methods:{initPager(){let e=this.$refs.modalStatusSlider,t=this.$refs.modalStatusPager;e.swiper.on("slideChange",function(){var e=this.realIndex;t.swiper.slideTo(e)})}}})}function initCommercial(){Vue.component("app-commercial",{data(){return{isLoaded:!1,Items:[],Areas:[],SelectedArea:null,Selected:{},ImageLoaded:!1,url:URLS.commerce}},created(){const t=this;fetch(t.url).then(e=>e.json()).then(e=>{t.Items=e,t.init()})},methods:{init(){this.isLoaded=!0,this.getAreas()},loadImage(){const e=this;let t=new Image;t.src=e.Selected.img,e.ImageLoaded=!1,t.onload=function(){e.ImageLoaded=!0,t=null}},getAreas(){let t=[];this.Items.forEach(function(e){e.status&&t.push(e.area)}),t=sort(t=unique(t),"asc"),this.Areas=t,this.selectArea(t[0])},selectArea(e){this.SelectedArea=e,this.getItem()},getItem(){let t=this.SelectedArea;var e=this.Items.find(function(e){return e.area==t});this.Selected=e,this.loadImage(),this.initFancy()},initFancy(){$(this.$refs.fancy).fancybox({hash:!1,protect:!0,animationDuration:400,clickSlide:!1,buttons:["close"],beforeShow:function(){document.body.classList.add("flats--photo")},afterClose:function(){document.body.classList.remove("flats--photo")}})}}})}function initContacts(){Vue.component("app-contacts",{props:{isPhone:Boolean},data(){return{MapData:MAP_DATA,timer:null,map:null}},mounted(){const e=this;e.timer=setInterval(function(){e.check()},4e3)},computed:{LatLng(){return this.MapData.latlng.split(",")},Sizes(){return this.MapData.sizes.split(",")},Offset(){return this.MapData.offset.split(",")},mapEl(){return this.$refs.mapEl}},methods:{check(){"undefined"!=typeof DG&&(clearInterval(this.timer),this.render())},render(){const o=this;let s,i=o.Sizes[0],n=o.Sizes[1],r=o.Offset[0],a=o.Offset[1];DG.then(function(){s=DG.map(o.mapEl,{center:o.LatLng,zoom:o.isPhone?o.MapData.zoom-1:o.MapData.zoom,fullscreenControl:!1,zoomControl:!1,scrollWheelZoom:!0});var e=DG.icon({iconUrl:o.MapData.marker,iconSize:[i,n],iconAnchor:[i/2-r,n/2-a]});DG.marker(o.LatLng,{icon:e,riseOnHover:!1,alt:"pin"}).addTo(s);let t=[];o.MapData.coords.split("],").forEach(function(e){e=e.replace("[","").replace("]",""),t.push(e.split(","))}),DG.polygon(t,{color:"#03abbf",opacity:1,weight:0,fillColor:"#03abbf",fillOpacity:1}).addTo(s),o.map=s})}}})}function initForms(){Vue.component("app-form",{template:"#form",props:{FormClass:String,Action:String,FormUtm:Object,Button:String},data(){return{Name:null,Phone:null,ErrorName:!1,ErrorPhone:!1,isLoading:!1,timer:null}},mounted(){const t=this;document.addEventListener("click",function(e){e.target.classList.contains("form-control")||(t.ErrorPhone=!1,t.ErrorName=!1)})},computed:{nameEl(){return this.$refs.nameEl},phoneEl(){return this.$refs.phoneEl}},methods:{checkErrors(){var e=this.phoneEl.getAttribute("placeholder"),e=this.Phone&&this.Phone.length==e.length-2;this.ErrorName=!this.Name,this.ErrorPhone=!e&&this.Name},send(){const e=this;e.isLoading=!0;e.Name,e.Phone,e.FormUtm.source,e.FormUtm.medium,e.FormUtm.campaign,e.FormUtm.term,e.FormUtm.content;setTimeout(function(){e.isLoading=!1,e.Name=null,e.Phone=null,e.$emit("show-response"),e.timer=setTimeout(function(){e.$emit("hide-response")},5e3),"undefined"!=typeof dataLayer&&dataLayer.push({event:"form_sent"})},500)},submit(e){this.checkErrors(),this.ErrorName||this.ErrorPhone||(this.nameEl.blur(),this.phoneEl.blur(),this.send())}}})}function initCounters(){Vue.component("app-counter",{template:`<template>
								<div class="counter hidden-xs">
									<span class="orig">{{ Value }}</span>
									<span class="coun">{{ Counter }}</span>
								</div>
							</template>`,props:{Value:Number},data(){return{Counter:1,Played:!1,Duration:1e3,From:1}},mounted(){const t=this,o=t.$el;window.addEventListener("scroll",function(){var e=window.pageYOffset;o.getBoundingClientRect().y<=e&&!t.Played&&t.Play()})},methods:{Play(){this.Played=!0;let t=this.From;var e=this.Value;const o=Math.round(this.Duration/(1e3/60));let s=0;const i=e-t,n=(i<0&&i,setInterval(()=>{s++;var e=(e=s/o)*(2-e),e=Math.round(i*e);parseInt(this.Counter,10)!==e&&(this.Counter=t+e),s===o&&clearInterval(n)},1e3/60))}}})}let vendorsTimer;function unique(e){return e.filter(function(e,t,o){return o.indexOf(e)===t})}function sort(e,o){return e.sort(function(e,t){return"asc"==o?t<e?1:-1:e<t?1:-1})}function initApp(){Vue.use(VueAwesomeSwiper),Vue.directive("mask",VueMask.VueMaskDirective),Vue.filter("formatMonth",function(e){if(e)return e.split(".")[1]}),Vue.filter("formatYear",function(e){if(e)return e.split(".")[2]}),Vue.filter("formatPage",function(e){e+=1;return e<10?"0"+e:e}),Vue.filter("formatAmount",function(e){return e<10?"0"+e:e}),new Vue({el:"#app",data:{isPhone:null,scrollTopOffset:0,scrollBarWidth:0,scrollBarOffset:0,StatusSlides:[],StatusModalShow:!1,TermsSelected:{},TermsDropShow:!1,appIsLoaded:!1,ShowDropMenu:!1,ShowPolicy:!1,ShowForm:!1,ShowResponse:!1,parallax:!1,UTM:{}},created(){const e=this;e.checkDevice(),window.addEventListener("resize",function(){e.checkDevice()})},mounted(){const t=this;t.initLazy(),t.checkUtm(),t.getScrollBarWidth(),t.appIsLoaded=!0,t.scrollTopOffset=t.headerEl.clientHeight-1;var e=location.hash;e&&"#policy"==e&&t.showPolicy(),document.addEventListener("keydown",function(e){"Escape"==e.code&&(t.StatusModalShow&&t.hideStatus(),t.ShowPolicy&&t.hidePolicy(),t.ShowForm&&t.closeForm(),t.TermsDropShow&&t.closeTerms())}),t.isPhone||t.parallax||t.initParallax(),t.initAos()},computed:{headerEl(){return this.$refs.headerEl},scrollBar(){return this.$refs.scrollBar}},watch:{scrollBarOffset(){document.body.style.paddingRight=this.scrollBarOffset+"px"},isPhone(){this.isPhone||this.parallax||this.initParallax(),this.isPhone&&this.parallax&&this.destroyParallax(),this.initLazy()}},methods:{checkDevice(){window.innerWidth<768?this.isPhone||(this.isPhone=!0):this.isPhone&&(this.isPhone=!1)},lockScroll(){this.scrollBarOffset=this.scrollBarWidth,document.body.classList.add("lock")},checkUtm(){const o=this;["source","medium","campaign","term","content"].forEach(function(e){var t="utm_"+e;o.UTM[e]=o.getParameterByName(t)})},getParameterByName(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let t=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=t.exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))},formatPhone(e){return"tel:"+(e="8"==(e=e.replace(/\s/g,"").replace("(","").replace(")","").replace("-","").replace("-","")).substr(0,1)&&e.indexOf("+")<0?"+7"+(e=e.substr(1)):e)},unLockScroll(){this.scrollBarOffset=0,document.body.classList.remove("lock")},getScrollBarWidth(){this.scrollBarWidth=this.scrollBar.offsetWidth-this.scrollBar.clientWidth,this.scrollBar.classList.add("done")},initLazy(){$(this.$el).find('[data-role="lazy"]').filter(":not(.loaded)").find(".lazy").Lazy({scrollDirection:"vertical",enableThrottle:!0,chainable:!1,visibleOnly:!0,afterLoad:function(e){$(e).parents('[data-role="lazy"]').addClass("loaded")}})},toggleDropMenu(){this.ShowDropMenu=!this.ShowDropMenu},closeDropMenu(){this.ShowForm=!1,this.ShowResponse=!1,this.ShowDropMenu=!1,this.ShowPolicy=!1},modalShow(){this.lockScroll()},modalShowed(){this.initLazy()},modalHidden(){this.ShowForm||this.ShowDropMenu||this.unLockScroll(),this.ShowResponse=!1},modalTermsHidden(){this.ShowForm||this.ShowDropMenu||this.unLockScroll()},showStatus(e){this.StatusSlides=e,this.StatusModalShow=!0},hideStatus(){this.StatusModalShow=!1},hiddenStatus(){this.StatusSlides={}},showPolicy(){this.ShowPolicy=!0},hidePolicy(){this.ShowPolicy=!1},toggleForm(){this.ShowForm=!this.ShowForm},openForm(){this.ShowDropMenu&&(this.ShowDropMenu=!1),this.ShowForm=!0},closeForm(){this.ShowForm=!1},showResponse(){const e=this;e.ShowResponse=!0,e.TermsDropShow&&(e.TermsDropShow=!1),e.ShowForm||(e.ShowForm=!0),setTimeout(function(){e.initLazy()},100)},hideResponse(){this.ShowResponse=!1,this.ShowForm=!1},openTerms(e){this.TermsSelected=e,this.TermsDropShow=!0},closeTerms(){this.TermsDropShow=!1},initAos(){AOS.init({disable:"mobile",once:!0})},initParallax(){this.parallax=skrollr.init({smoothScrolling:!1,mobileDeceleration:.004,forceHeight:!1})},destroyParallax(){this.parallax.destroy(),this.parallax=!1}}})}function checkVendors(){"undefined"!=typeof Vue&&(clearInterval(vendorsTimer),initOrder(),initBenefits(),initPoints(),initGallery(),initFlats(),initTerms(),initModalStatus(),initStatus(),initCommercial(),initContacts(),initForms(),initDropTerms(),initCounters(),initApp())}window.onload=function(){vendorsTimer=setInterval(function(){checkVendors()},200)};